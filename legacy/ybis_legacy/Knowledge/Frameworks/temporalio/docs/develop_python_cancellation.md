Interrupt a Workflow Execution - Python SDK | Temporal Platform Documentation



[Skip to main content](#__docusaurus_skipToContent_fallback)

On this page

You can interrupt a Workflow Execution in one of the following ways:

* [Cancel](#cancellation): Canceling a Workflow provides a graceful way to stop Workflow Execution.
* [Terminate](#termination): Terminating a Workflow forcefully stops Workflow Execution.

Terminating a Workflow forcefully stops Workflow Execution. This action resembles killing a process.

* The system records a `WorkflowExecutionTerminated` event in the Workflow History.
* The termination forcefully and immediately stops the Workflow Execution.
* The Workflow code gets no chance to handle termination.
* A Workflow Task doesn't get scheduled.

In most cases, canceling is preferable because it allows the Workflow to finish gracefully. Terminate only if the
Workflow is stuck and cannot be canceled normally.

## Cancel a Workflow Execution[​](#cancellation "Direct link to Cancel a Workflow Execution")

Canceling a Workflow provides a graceful way to stop Workflow Execution. This action resembles sending a `SIGTERM` to a
process.

* The system records a `WorkflowExecutionCancelRequested` event in the Workflow History.
* A Workflow Task gets scheduled to process the cancelation.
* The Workflow code can handle the cancelation and execute any cleanup logic.
* The system doesn't forcefully stop the Workflow.

To cancel a Workflow Execution in Python, use the
[cancel()](https://python.temporal.io/temporalio.client.WorkflowHandle.html#cancel) function on the Workflow handle.

```
await client.get_workflow_handle("your_workflow_id").cancel()
```

### Cancel an Activity from a Workflow[​](#cancel-activity "Direct link to Cancel an Activity from a Workflow")

Canceling an Activity from within a Workflow requires that the Activity Execution sends Heartbeats and sets a Heartbeat
Timeout. If the Heartbeat is not invoked, the Activity cannot receive a cancellation request. When any non-immediate
Activity is executed, the Activity Execution should send Heartbeats and set a
[Heartbeat Timeout](/encyclopedia/detecting-activity-failures#heartbeat-timeout) to ensure that the server knows it is
still working.

When an Activity is canceled, an error is raised in the Activity at the next available opportunity. If cleanup logic
needs to be performed, it can be done in a `finally` clause or inside a caught cancel error. However, for the Activity
to appear canceled the exception needs to be re-raised.

note

Unlike regular Activities, [Local Activities](/local-activity) can be canceled if they don't send Heartbeats. Local
Activities are handled locally, and all the information needed to handle the cancellation logic is available in the same
Worker process.

To cancel an Activity from a Workflow Execution, call the
[cancel()](https://docs.python.org/3/library/asyncio-task.html#asyncio.Task.cancel) method on the Activity handle that
is returned from [start\_activity()](https://python.temporal.io/temporalio.workflow.html#start_activity).

```
@activity.defn  
async def cancellable_activity(input: ComposeArgsInput) -> NoReturn:  
    try:  
        while True:  
            print("Heartbeating cancel activity")  
            await asyncio.sleep(0.5)  
            activity.heartbeat("some details")  
    except asyncio.CancelledError:  
        print("Activity cancelled")  
        raise  
  
  
@activity.defn  
async def run_activity(input: ComposeArgsInput):  
    print("Executing activity")  
    return input.arg1 + input.arg2  
  
@workflow.defn  
 class GreetingWorkflow:  
     @workflow.run  
     async def run(self, input: ComposeArgsInput) -> None:  
        activity_handle = workflow.start_activity(  
            cancellable_activity,  
            ComposeArgsInput(input.arg1, input.arg2),  
            start_to_close_timeout=timedelta(minutes=5),  
            heartbeat_timeout=timedelta(seconds=30),  
        )  
  
        await asyncio.sleep(3)  
        activity_handle.cancel()
```

note

The Activity handle is a Python task. By calling `cancel()`, you're essentially requesting the task to be canceled.

## Terminate a Workflow Execution[​](#termination "Direct link to Terminate a Workflow Execution")

Terminating a Workflow forcefully stops Workflow Execution. This action resembles killing a process.

* The system records a `WorkflowExecutionTerminated` event in the Workflow History.
* The termination forcefully and immediately stops the Workflow Execution.
* The Workflow code gets no chance to handle termination.
* A Workflow Task doesn't get scheduled.

To terminate a Workflow Execution in Python, use the
[terminate()](https://python.temporal.io/temporalio.client.WorkflowHandle.html#terminate) function on the Workflow
handle.

```
await client.get_workflow_handle("your_workflow_id").terminate()
```

## Reset a Workflow Execution[​](#reset "Direct link to Reset a Workflow Execution")

Resetting a Workflow Execution terminates the current Workflow Execution and starts a new Workflow Execution from a
point you specify in its Event History. Use reset when a Workflow is blocked due to a non-deterministic error or other
issues that prevent it from completing.

When you reset a Workflow, the Event History up to the reset point is copied to the new Workflow Execution, and the
Workflow resumes from that point with the current code. Reset only works if you've fixed the underlying issue, such as
removing non-deterministic code. Any progress made after the reset point will be discarded. Provide a reason when
resetting, as it will be recorded in the Event History.

* Web UI* Temporal CLI

1. Navigate to the Workflow Execution details page,
2. Click the **Reset** button in the top right dropdown menu,
3. Select the Event ID to reset to,
4. Provide a reason for the reset,
5. Confirm the reset.

The Web UI shows available reset points and creates a link to the new Workflow Execution after the reset completes.

Use the `temporal workflow reset` command to reset a Workflow Execution:

```
temporal workflow reset \  
    --workflow-id <workflow-id> \  
    --event-id <event-id> \  
    --reason "Reason for reset"
```

For example:

```
temporal workflow reset \  
    --workflow-id my-background-check \  
    --event-id 4 \  
    --reason "Fixed non-deterministic code"
```

By default, the command resets the latest Workflow Execution in the `default` Namespace. Use `--run-id` to reset a
specific run. Use `--namespace` to specify a different Namespace:

```
temporal workflow reset \  
    --workflow-id my-background-check \  
    --event-id 4 \  
    --reason "Fixed non-deterministic code" \  
    --namespace my-namespace \  
    --tls-cert-path /path/to/cert.pem \  
    --tls-key-path /path/to/key.pem
```

Monitor the new Workflow Execution after resetting to ensure it completes successfully.

* [Cancel a Workflow Execution](#cancellation)
  + [Cancel an Activity from a Workflow](#cancel-activity)* [Terminate a Workflow Execution](#termination)* [Reset a Workflow Execution](#reset)