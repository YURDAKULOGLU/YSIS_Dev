**Technical Specification (SPEC.md)**

# Currency Conversion Service

## Requirements

### What needs to be built:

* A Python service (`src/ybis/services/currency.py`) that converts USD to EUR using a hardcoded exchange rate.
* The conversion service will be exposed via a new MCP tool (`mcp_server.py`).

### Rationale:

The proposed currency conversion service is needed to provide a standardized and secure way to convert currencies for internal use within the system. This service will utilize a hardcoded exchange rate, which is a reasonable approach given the constraints of the project.

## Technical Approach

* The currency conversion service will be implemented using Python as the programming language.
* The service will use a simple arithmetic formula to perform the currency conversion (e.g., `eur = usd * exchange_rate`).
* The hardcoded exchange rate will be stored in an environment variable for easy management and update.

## Data Models and API Signatures

### Currency Conversion Data Model:

| Field Name | Data Type | Description |
| --- | --- | --- |
| id | int | Unique identifier for the conversion |
| amount_usd | float | Amount in USD to convert |
| amount_eur | float | Converted amount in EUR |

The `amount_eur` field will be computed using the hardcoded exchange rate.

### API Signature:

* Service Name: `convert_currency`
* Endpoint URL: `/api/currency/convert`
* Request Body:
```json
{
  "amount_usd": float
}
```
* Response:
```json
{
  "id": int,
  "amount_eur": float
}
```

## Constraints and Considerations

### Hardcoded Exchange Rate:

* The hardcoded exchange rate will be stored in an environment variable (`EXCHANGE_RATE`) for easy management and update.
* The exchange rate will be updated periodically to reflect changes in the market.

### Scalability:

* The currency conversion service is not expected to handle large volumes of requests, so scalability concerns are minimal.
* However, it's essential to ensure that the service can handle a reasonable number of concurrent requests without significant performance degradation.

### Maintainability:

* The implementation will follow standard Python coding conventions and best practices for readability and maintainability.
* The hardcoded exchange rate will be stored in an environment variable, making it easy to update and manage.

## Additional Considerations

* Security:
	+ The service will not store sensitive data, such as user credentials or personal information.
	+ However, the hardcoded exchange rate should be stored securely, using an environment variable or a secure configuration file.
* Documentation:
	+ A clear and concise API documentation will be provided for the MCP tool (`mcp_server.py`).
	+ The `convert_currency` service will be thoroughly tested to ensure it meets the required specifications.

By following this technical specification, we can create a robust and maintainable currency conversion service that meets our system's requirements.