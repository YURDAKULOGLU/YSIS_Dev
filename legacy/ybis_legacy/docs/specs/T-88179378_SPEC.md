**Technical Specification (SPEC.md)**

# Task Objective: Currency Conversion Service
=============================================

## What Needs to Be Built (Requirements)
--------------------------------------

### Requirements

* Implement a new service `src/ybis/services/currency.py` that converts USD to EUR using a hardcoded rate.
* Expose this service via a new MCP tool `convert_currency` in `mcp_server.py`.

### Functional Requirements

* The `currency.py` service should accept the following input:
	+ `amount`: the amount of USD to be converted
	+ `rate`: the hardcoded conversion rate from USD to EUR (currently set at 1:1)
* The `convert_currency` MCP tool in `mcp_server.py` should expose a REST endpoint for converting USD to EUR.
* The service and API should handle errors and exceptions properly.

## Why It's Needed (Rationale)
---------------------------

The implementation of this currency conversion service addresses the need for a standardized, maintainable way to convert currencies. This will enable easier integration with other services that require currency conversions.

## Technical Approach (How)
-------------------------

### Service Implementation

* The `currency.py` service will utilize Python 3.x.
* It will rely on the `requests` library for making external API calls (in this case, none).
* The conversion logic will be implemented using a simple formula based on the hardcoded rate.

### MCP Tool Exposition

* The `convert_currency` MCP tool in `mcp_server.py` will utilize Flask 2.x for building the REST API.
* It will expose a single endpoint (`/convert`) that accepts POST requests with JSON payload containing the conversion amount and rate.

## Data Models and API Signatures
---------------------------------

### Service Data Model

| Field | Type | Description |
| --- | --- | --- |
| `amount` | float | The amount of USD to be converted |
| `rate` | float | The hardcoded conversion rate from USD to EUR |

### MCP Tool API Signature

| Method | Endpoint | Request Body | Response |
| --- | --- | --- | --- |
| POST | `/convert` | JSON payload (`{"amount": float, "rate": float}`) | JSON response with converted amount in EUR (`{"result": float, "error": str}`) |

## Constraints and Considerations
-------------------------------

### Service Limitations

* The hardcoded rate should be reviewed and updated periodically to reflect changes in currency exchange rates.
* The conversion logic should be tested thoroughly to ensure accuracy.

### MCP Tool Considerations

* The API endpoint and request body are designed for simplicity and ease of use. However, they may not meet the full requirements of a production-ready API.
* Error handling and logging mechanisms should be implemented to ensure reliable service operation.

### System Constraints

* This implementation assumes that the `mcp_server.py` server is running on a Python 3.x environment with required libraries installed.
* The `currency.py` service will rely on external dependencies for making API calls (in this case, none).